{"id": "chatcmpl-lfqefyipzze7y23sb0m6sl", "choices": [{"finish_reason": "stop", "index": 0, "logprobs": null, "message": {"content": "Certainly! Below is a Python function that uses regular expressions to extract a three-character code from a filename in the specified format \"57-1Jn.usfm\" where the characters can be digits or letters (upper or lower case), and the file extension must be \".usfm\". The function includes exception handling to return `None` if there is an error.\n\n```python\nimport re\n\ndef extract_code_from_filename(filename):\n    try:\n        # Define the regex pattern for three-character code followed by .usfm extension.\n        pattern = r'-(\\w{3})\\.usfm$'\n        \n        # Search for the pattern in the filename.\n        match = re.search(pattern, filename)\n        \n        if match:\n            return match.group(1)  # Return the matched group\n        else:\n            return None  # No match found\n        \n    except Exception as e:\n        print(f\"An error occurred: {e}\")\n        return None\n\n# Example usage:\nfilename = \"57-1Jn.usfm\"\ncode = extract_code_from_filename(filename)\nprint(code)  # Output should be '1Jn'\n\nfilename_with_error = \"invalid-filename.txt\"\ncode = extract_code_from_filename(filename_with_error)\nprint(code)  # Output should be None\n```\n\n### Explanation:\n- **Regex Pattern**: `r'-(\\w{3})\\.usfm$'`\n  - `-`: Matches the hyphen before the three-character code.\n  - `\\w{3}`: Matches exactly three word characters (letters or digits).\n  - `\\.usfm$`: Ensures that the string ends with \".usfm\".\n- **re.search(pattern, filename)**: Searches for the pattern in the given filename. It returns a match object if found.\n- **match.group(1)**: Returns the first group from the regex (the three-character code).\n\n### Example Usage:\n- The function will correctly extract \"1Jn\" from filenames like \"57-1Jn.usfm\".\n- If the filename doesn't match the expected format, it returns `None`.\n\nThis setup ensures robustness with proper error handling and validation.", "role": "assistant"}}], "created": 1728766678, "model": "qwen2.5-14b-instruct", "object": "chat.completion", "system_fingerprint": "qwen2.5-14b-instruct", "usage": {"completion_tokens": 441, "prompt_tokens": 90, "total_tokens": 531}, "time": "35.55"}